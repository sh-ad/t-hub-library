<!doctype html>
<html lang="ru">
<meta charset="utf-8">
<title>Взять книгу</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;padding:24px;line-height:1.4}
  .card{max-width:520px;margin:0 auto;border:1px solid #ddd;border-radius:12px;padding:20px}
  button{padding:12px 16px;border:0;border-radius:10px;font-size:16px;cursor:pointer}
  .primary{background:#2b6cb0;color:#fff}
  .muted{color:#666;font-size:14px;margin-top:12px}
  code{background:#f5f5f5;padding:2px 6px;border-radius:6px}
</style>
<div class="card">
  <h2>Взять книгу</h2>
  <p>Команда скопирована в буфер. Открой бота и просто <b>вставь</b> (⌘V / Ctrl+V), затем Enter.</p>
  <p><b>Команда:</b> <code id="cmd">/b A1B2</code></p>
  <button class="primary" id="open">Открыть бота в Time</button>
  <p class="muted">Если кнопка не сработала, открой бота вручную и вставь команду.</p>
</div>
<script>
  const CMD = "/b A1B2"; // подставляй реальный код книги сервером
  const DEEPLINK = "mattermost://your-server/your-team/messages/@bookbot"; // подставь свои значения

  document.getElementById('cmd').textContent = CMD;
  (async () => { try { await navigator.clipboard.writeText(CMD); } catch(e){} })();

  document.getElementById('open').addEventListener('click', () => {
    // Попытка открыть приложение Time/Mattermost
    window.location.href = DEEPLINK;
    // Фолбэк: через 800мс предложить инструкцию
    setTimeout(() => {
      alert("Откройте чат с ботом и вставьте команду из буфера обмена.");
    }, 800);
  });
</script>
